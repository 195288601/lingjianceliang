# 机器视觉零件测量系统

这是一个基于机器视觉的零件测量系统，可以对圆形和矩形零件进行标定和测量。系统使用白色A4纸作为背景，支持图片和摄像头两种输入方式。

## 功能特点

- **标定功能**：
  - 圆形标定：使用已知半径的圆形物体进行标定
  - 矩形标定：使用已知尺寸的矩形物体进行标定
  - 自定义标定：支持自定义物体标定（开发中）

- **测量功能**：
  - 圆形测量：测量圆形零件的半径
  - 矩形测量：测量矩形零件的长度和宽度
  - 支持与期望尺寸比较，计算误差
  - 支持保存测量结果

- **输入方式**：
  - 图片输入：上传图片进行标定或测量
  - 摄像头输入：使用摄像头实时捕获图像进行标定或测量

## 安装说明

1. 确保已安装Python 3.7或更高版本
2. 克隆或下载本项目到本地
3. 安装依赖包：

```bash
pip install -r requirements.txt
```

## 使用方法

1. 运行应用：

```bash
streamlit run app.py
```

2. 在浏览器中打开显示的URL（通常是http://localhost:8501）

3. 使用流程：
   - 用户登录：
     * 首次使用需要注册账号
     * 使用已有账号登录系统
     * 根据用户权限访问相应功能
   
   - 首先进行标定：
     * 图片模式：选择"标定"模式，上传标定图片，输入实际尺寸，点击"开始标定"
     * 摄像头模式：选择"标定"模式，点击"打开摄像头"，调整物体位置，输入实际尺寸，点击"开始标定"
   
   - 然后进行测量：
     * 图片模式：选择"测量"模式，上传测量图片，输入期望尺寸，点击"开始测量"
     * 摄像头模式：选择"测量"模式，点击"打开摄像头"，调整物体位置，输入期望尺寸，点击"开始测量"
   
   - 查看测量结果，可选择保存结果

## 注意事项

- 拍摄图片时，请确保使用白色A4纸作为背景
- 物体应与背景有明显的对比度
- 拍摄时避免阴影和反光
- 标定和测量使用的相机应保持一致，以确保准确性

## 文件结构

- `app.py`：主应用程序
- `auth.py`：用户认证和权限管理模块
- `home_page.py`：首页界面和导航模块
- `image_processing.py`：图像处理模块
- `camera_utils.py`：摄像头操作和图像采集工具
- `text_utils.py`：文本处理和格式化工具
- `requirements.txt`：依赖包列表
- `calibration/`：存储标定数据
- `results/`：存储测量结果
- `users/`：用户数据和配置文件存储

## 技术栈

- Streamlit：用于构建Web界面
- OpenCV：用于图像处理和计算机视觉算法
- NumPy：用于数值计算
- PIL：用于图像处理